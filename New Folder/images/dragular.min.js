!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var r=t(1),o=t(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",r)},function(e,n){"use strict";var t=function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return}}var i,a=n.$eval(r.dragular)||o(r.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=n.$eval(a.containersModel)),a&&a.dynamicModelAttribute?n.$watch(function(){return n.$eval(r.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(n.$eval(e)))}):r.dragularModel&&(a.containersModel=n.$eval(r.dragularModel)),r.dragularNameSpace&&(a.nameSpace=r.dragularNameSpace.split(" ")),r.dragularOnInit&&(a.onInit=n.$eval(r.dragularOnInit)),i=e(t[0],a)}}};t.$inject=["dragularService"],e.exports=t},function(e,n){"use strict";var t={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},r=function(e,n){function r(r,d){function x(){1!==arguments.length||$(r)||angular.isElement(r)||r[0]||"string"==typeof r?"string"==typeof r&&(ge=document.querySelectorAll(r)):(fe=r||{},ge=[]),me=fe.copyOptions?angular.copy(fe):fe}function b(){var e=angular.extend({},xe,me);angular.extend(me,e),me.classes&&(e=angular.extend({},ve,me.classes),angular.extend(me.classes,e)),me.eventNames&&(e=angular.extend({},he,me.eventNames),angular.extend(me.eventNames,e))}function N(){h(me.boundingBox)||(me.boundingBox=!1),me.containers&&(ge=me.containers),me.containers=o(ge,!1,me.scope),me.containersModel=o(me.containersModel,!0,me.scope),$(me.containersFilteredModel)?me.containersFilteredModel=$(me.containersFilteredModel[0])?me.containersFilteredModel:[me.containersFilteredModel]:me.containersFilteredModel=[],me.nameSpace||(me.nameSpace=["dragularCommon"]),$(me.nameSpace)||(me.nameSpace=[me.nameSpace]),me.nameSpace.forEach(function(e){t.containers[e]||(t.containers[e]=[],t.containersCtx[e]=[]);for(var n=_(me).length,r=t.containers[e].length,o=0;o<n;o++)t.containers[e][o+r]=_(me)[o],t.containersCtx[e][o+r]={o:me,m:ee(me)[o],fm:me.containersFilteredModel[o]}})}function B(e){var n=e?"off":"on";i(T,n,"mouseup",re),_(me).forEach(function(e){i(e,"on","mousedown",A)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var n=me.eventNames[e];t.dragOverEvents[n]||(O.createEvent?(t.dragOverEvents[n]=O.createEvent("HTMLEvents"),t.dragOverEvents[n].initEvent(n,!0,!0)):(t.dragOverEvents[n]=O.createEventObject(),t.dragOverEvents[n].eventType=n))})}function A(e){if(1===u(e)&&!e.metaKey&&!e.ctrlKey){t.moveX=e.clientX,t.moveY=e.clientY;var n=j(e.target);n&&n.item&&(t.grabbed=n,D(),"mousedown"===e.type&&(S(e.target)?e.target.focus():e.preventDefault()))}}function D(e){var n=e?"off":"on";i(T,n,"mousemove",F)}function F(e){if(t.grabbed&&!ye.dragging){if(e.originalEvent&&(e=e.originalEvent),0===u(e))return void re({});if(!e.clientX||e.clientX!==t.moveX||!e.clientY||e.clientY!==t.moveY){if(pe(me.ignoreInputTextSelection)){var n=E("clientX",e),r=E("clientY",e),o=O.elementFromPoint(n,r);if(S(o))return}var i=t.grabbed;if(D("remove"),H(),R(),L(i),t.item){if(!me.direction&&C(t.sourceItem)){var a=t.sourceItem.parentNode,l=a.offsetHeight,c=a.offsetWidth,s=t.sourceItem.clientHeight,d=t.sourceItem.clientWidth;me.direction=l/s<c/d?"horizontal":"vertical"}var g=m(t.sourceItem);t.offsetX=E("pageX",e)-g.left,t.offsetY=E("pageY",e)-g.top,t.clientX=E("clientX",e),t.clientY=E("clientY",e),me.boundingBox&&(t.offsetXr=E("pageX",e)-g.right,t.offsetYb=E("pageY",e)-g.bottom),e.preventDefault(),k(),y(t.item,me.classes.transit),t.mirror.style.left=t.clientX-t.offsetX+"px",t.mirror.style.top=t.clientY-t.offsetY+"px",W(e)}}}}function H(e){var n=e?"off":"on";i(T,n,"selectstart",s),i(T,n,"click",s),i(T,n,"touchmove",s)}function j(e){if(!ye.dragging||!t.mirror){for(var n=e;C(e)&&!Z(C(e));){if(me.invalid(e,n))return;if(e=C(e),!e)return}var r=C(e);if(r&&!me.invalid(e,n)&&me.moves(e,r,n,v(e)))return{item:e,source:r}}}function L(e){t.sourceItem=t.item=e.item,t.source=e.source,t.initialSibling=t.currentSibling=v(e.item),pe(me.copy,[e.item,e.source])?(t.item=e.item.cloneNode(!0),t.copy=!0,me.scope&&me.scope.$emit(me.eventNames.dragularcloned,t.item,e.item)):t.copy=!1;var n=_(me).indexOf(e.source);return t.sourceModel=ee(me)[n],t.sourceFilteredModel=me.containersFilteredModel[n],t.initialIndex=I(e.item,e.source),ye.dragging=!0,me.scope&&me.scope.$emit(me.eventNames.dragulardrag,t.sourceItem,t.source),!0}function P(e){var n=j(e);n&&(t.grabbed=n,D())}function k(){if(!t.mirror){var e=t.sourceItem.getBoundingClientRect();t.mirror=t.sourceItem.cloneNode(!0),t.mirrorWidth=e.width,t.mirrorHeight=e.height,t.mirror.style.width=g(e)+"px",t.mirror.style.height=f(e)+"px",y(t.mirror,me.classes.mirror),me.mirrorContainer.appendChild(t.mirror),i(T,"on","mousemove",W),y(O.body,me.classes.unselectable),i(t.mirror,"on","wheel",ue),me.scope&&me.scope.$emit(me.eventNames.dragularcloned,t.mirror,t.sourceItem)}}function R(){ye.dragging&&t.item&&oe(t.item,C(t.item))}function z(){t.grabbed=!1,D("remove"),H("remove")}function W(e){function n(n){me.scope&&me.scope.$emit(me.eventNames["dragular"+n],t.item,t.lastDropTarget,t.source,e),pe(me.removeOnSpill)===!0&&("over"===n?U():q())}if(t.mirror){e.originalEvent&&(e=e.originalEvent),t.clientX=E("clientX",e),t.clientY=E("clientY",e);var r,o,i,a=t.clientX-t.offsetX,l=t.clientY-t.offsetY;me.boundingBox&&(r=E("pageX",e),o=E("pageY",e),i=m(me.boundingBox)),me.lockY||(!me.boundingBox||r>i.left+t.offsetX&&r<i.right+t.offsetXr?t.mirror.style.left=a+"px":me.boundingBox&&(r<i.left+t.offsetX?t.mirror.style.left=t.clientX-(r-i.left)+"px":t.mirror.style.left=t.clientX-t.mirrorWidth-(r-i.right)+"px")),me.lockX||(!me.boundingBox||o>i.top+t.offsetY&&o<i.bottom+t.offsetYb?t.mirror.style.top=l+"px":me.boundingBox&&(o<i.top+t.offsetY?t.mirror.style.top=t.clientY-(o-i.top)+"px":t.mirror.style.top=t.clientY-t.mirrorHeight-(o-i.bottom)+"px"));var c=V(t.mirror,t.clientX,t.clientY),u=K(c,t.clientX,t.clientY),s=u!==t.lastDropTarget;if(c!==t.lastElementBehindCursor&&(X(c,t.dragOverEvents.dragularenter,!!u),t.lastElementBehindCursor&&X(t.lastElementBehindCursor,t.dragOverEvents.dragularleave,c),t.lastElementBehindCursor=c),s&&(t.lastDropTarget&&n("out"),t.lastDropTarget=u,n("over")),u===t.source&&t.copy&&!pe(me.copySortSource))return void(C(t.item)&&t.item.parentNode.removeChild(t.item));var d,g=G(u,c);if(null!==g)d=Q(u,g,t.clientX,t.clientY);else{if(pe(me.revertOnSpill)!==!0||t.copy)return void(t.copy&&C(t.item)&&t.item.parentNode.removeChild(t.item));d=t.initialSibling,u=t.source}(null===d||d!==t.item&&d!==v(t.item)&&d!==t.currentSibling)&&(t.currentSibling=d,u.insertBefore(t.item,d),me.scope&&me.scope.$emit(me.eventNames.dragularshadow,t.item,u,e))}}function K(e,n,r){function o(){if(!Z(a))return!1;for(var o,c=G(a,e),u=Q(a,c,n,r),s=J(a,u),d=me.nameSpace.length;d--;)if(o=me.nameSpace[d],t.containers[o].indexOf(a)!==-1){l=i(o);break}return t.target=a,!!s||(l||(l=i("dragularCommon")),l&&w(l.o.containersModel)&&(l.m=ee(l.o)[_(l.o).indexOf(a)]),!(l&&l.o.accepts&&!l.o.accepts(t.item,a,t.source,u,t.sourceModel,t.initialIndex))&&(!(me.isContainer&&me.isContainerAccepts&&!me.isContainerAccepts(t.item,a,t.source,u,t.sourceModel,t.initialIndex))&&(!me.canBeAccepted||me.canBeAccepted(t.item,a,t.source,u,t.sourceModel,t.initialIndex))))}function i(e){return t.containersCtx[e][t.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=C(a);return t.targetCtx=l||{},a}function U(){M(t.item,me.classes.hide)}function q(){ye.dragging&&y(t.item,me.classes.hide)}function J(e,n){var r=void 0!==n?n:t.mirror?t.currentSibling:v(t.item);return e===t.source&&r===t.initialSibling}function G(e,n){for(var t=n;t!==e&&C(t)!==e;)t=C(t);return t===T?null:t}function Q(e,n,t,r){function o(){var n,o,i,a=e.children.length;for(n=0;n<a;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function i(){var e=n.getBoundingClientRect();return a(l?t>e.left+g(e)/2:r>e.top+f(e)/2)}function a(e){return e?v(n):n}var l="horizontal"===me.direction;return n!==e?i():o()}function V(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+me.classes.hide,r=O.elementFromPoint(n,t),o.className=i,r}function Z(e){if(!e)return!1;for(var n=me.nameSpace.length;n--;)if(t.containers[me.nameSpace[n]].indexOf(e)!==-1)return!0;return me.isContainer(e)?(t.tempModel=me.isContainerModel(e),!0):(t.tempModel=null,!1)}function _(e){return ne("containers",e)}function ee(e){return ne("containersModel",e,!0)}function ne(e,n,r){return w(n[e])?o(n[e](n===me?ye:null,t),r,n.scope):n[e]}function te(e){if(ye.dragging){var n=arguments.length>0?e:pe(me.revertOnSpill),r=C(t.item),o=J(r);o||t.copy||!n||t.source.insertBefore(t.item,t.initialSibling),!t.sourceModel||t.copy||n?me.scope&&(o||n)&&me.scope.$emit(me.eventNames.dragularcancel,t.item,t.source,t.sourceModel,t.initialIndex):oe(t.item,r),(!t.sourceModel||t.copy||n||o)&&ae()}}function re(e){if(z(),ye.dragging){e.originalEvent&&(e=e.originalEvent),t.clientX=E("clientX",e),t.clientY=E("clientY",e);var n=V(t.mirror,t.clientX,t.clientY),r=K(n,t.clientX,t.clientY);r&&(t.copy&&pe(me.copySortSource)||!t.copy||r!==t.source)?oe(t.item,r):pe(me.removeOnSpill)?ie():te(),t.target=null,t.lastElementBehindCursor&&X(t.lastElementBehindCursor,t.dragOverEvents.dragularrelease,n),me.scope&&me.scope.$emit(me.eventNames.dragularrelease,t.item,t.source,e)}}function oe(r,o){function a(){if(_(me).forEach(function(e){i(e,"off","mousedown",A),i(e,"on","mousedown",A)}),me.compileItemOnDrop){var e=angular.element(o).scope?angular.element(o).scope():me.scope;e&&e.$applyAsync(function(){var i=n(t.copy?l.cloneNode(!0):l)(e);r.parentNode===o&&o.removeChild(r),o.insertBefore(i[0],c),ae()})}me.scope&&(J(o)?me.scope.$emit(me.eventNames.dragularcancel,r,t.source,t.sourceModel,t.initialIndex):me.scope.$emit(me.eventNames.dragulardrop,r,o,t.source,t.sourceModel,t.initialIndex,t.targetModel,u)),me.compileItemOnDrop||ae()}if(!r)return void ae();var l=t.sourceItem,c=t.currentSibling,u=I(r,o);t.copy&&o===t.source&&C(r)&&pe(me.copySortSource)&&r.parentNode.removeChild(t.sourceItem),t.sourceModel&&!J(o)?(t.targetCtx&&t.targetCtx.fm&&(u=t.targetCtx.m.indexOf(t.targetCtx.fm[u])),t.sourceFilteredModel&&(t.initialIndex=t.sourceModel.indexOf(t.sourceFilteredModel[t.initialIndex])),e.$applyAsync(function(){t.sourceModel&&(o===t.source?t.sourceModel.splice(u,0,t.sourceModel.splice(t.initialIndex,1)[0]):(t.dropElmModel=t.copy&&!me.dontCopyModel?angular.copy(t.sourceModel[t.initialIndex]):t.sourceModel[t.initialIndex],t.tempModel?t.targetModel=t.tempModel:t.targetModel=t.targetCtx&&t.targetCtx.m||t.sourceModel,r.parentNode.removeChild(r),t.copy||t.sourceModel.splice(t.initialIndex,1),t.targetModel&&t.targetModel.splice(u,0,t.dropElmModel)),C(r)&&r.parentNode.removeChild(r),a())})):a()}function ie(){if(ye.dragging){var n=C(t.item);n&&n.removeChild(t.item),t.sourceModel&&e.$applyAsync(function(){t.sourceModel.splice(t.initialIndex,1),ae()}),me.scope&&me.scope.$emit(t.copy?me.eventNames.dragularcancel:me.eventNames.dragularremove,t.item,n,t.sourceModel,t.initialIndex),t.sourceModel||ae()}}function ae(){z(),se(),t.item&&M(t.item,me.classes.transit),ye.dragging=!1,pe(me.removeOnSpill)===!0&&q(),me.scope&&(t.lastDropTarget&&me.scope.$emit(me.eventNames.dragularout,t.item,t.lastDropTarget,t.source),me.scope.$emit(me.eventNames.dragulardragend,t.item)),t.source=t.item=t.sourceItem=t.initialSibling=t.currentSibling=t.sourceModel=null,t.initialIndex=t.currentIndex=t.lastDropTarget=t.tempModel=t.targetModel=null,t.dropElmModel=t.targetCtx=t.copy=t.moveX=t.moveY=null}function le(){B(!0),ce(me.containers),re({})}function ce(n){e.$applyAsync(function(){var e=$(n)?n:c(n);e.forEach(function(e){angular.forEach(me.nameSpace,function(n){var r;r=t.containers[n].indexOf(e),t.containers[n].splice(r,1),t.containersCtx[n].splice(r,1)})})})}function ue(e){if(t.target){e.originalEvent&&(e=e.originalEvent);var n=t.target.scrollTop;t.target.scrollTop+=e.deltaY,n!==t.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function se(){t.mirror&&(M(O.body,me.classes.unselectable),i(T,"off","mousemove",W),i(t.mirror,"off","wheel",ue),C(t.mirror)&&t.mirror.parentNode.removeChild(t.mirror),t.mirror=null)}function de(e){o(e,!0,me.scope)}var me,ge=r||[],fe=d||{},pe=Y,ve={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},he={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},xe={copyOptions:!1,classes:ve,eventNames:he,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:a,isContainerModel:p,isContainerAccepts:l,moves:l,accepts:l,canBeAccepted:l,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:a,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},ye={containers:t.containers,containersCtx:t.containersCtx,sanitizeContainersModel:de,sanitizeContainers:o,isContainer:Z,start:P,end:R,cancel:te,remove:ie,destroy:le,dragging:!1};return x(),b(),N(),B(),me.onInit&&me.onInit(ye,me),ye}function o(e,n,t){return w(e)?e:$(e)?n?$(e[0])?e:[e]:e:"string"==typeof e&&t?function(){return t[e]}:e?c(e):[]}function i(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[n]](t,r,{passive:!1}),e[c[n]](o[t],r,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[t]?l[n](i[t],r):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[t]?l[n](a[t],r):o[t]&&l[n](o[t],r),l[n](t,r)}function a(){return!1}function l(){return!0}function c(e,n){return $(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function u(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function s(e){e.originalEvent&&(e=e.originalEvent),t.grabbed&&e.preventDefault()}function d(e,n){return"undefined"!=typeof window[n]?window[n]:T.clientHeight?T[e]:O.body[e]}function m(e){var n=e.getBoundingClientRect(),t=d("scrollTop","pageYOffset"),r=d("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function g(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(){return{}}function v(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}if(e)return e.nextElementSibling||n()}function h(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var n=t.classesCache[e];return n?n.lastIndex=0:t.classesCache[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function y(e,n){var t=e.className;t.length?x(n).test(t)||(e.className+=" "+n):e.className=n}function M(e,n){e.className=e.className.replace(x(n)," ").trim()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function E(e,n){var t=b(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),!t.type||t.type.indexOf("touch")<0?t[e]:t.type.indexOf("end")===-1&&t.originalEvent.touches[0][e.replace("client","page")]}function C(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||N(e)}function N(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||N(C(e))))}function I(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function X(e,n,r){e&&(t.extra=r,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}function Y(e,n,r){return w(e)?!!e.apply(r||this,n||t):!!e}var O=document,T=O.documentElement,$=Array.isArray,w=angular.isFunction;return r.cleanEnviroment=function(){t.classesCache={},t.containersCtx={},t.containers={},t.mirror=void 0},r.shared=t,r};r.$inject=["$rootScope","$compile"],e.exports=r}])});
//# sourceMappingURL=dragular.min.js.map
